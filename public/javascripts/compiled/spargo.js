var ut=Object.defineProperty,Z=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,V=(t,e,s)=>e in t?ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,O=(t,e)=>{for(var s in e||={})dt.call(e,s)&&V(t,s,e[s]);if(Z)for(var s of Z(e))pt.call(e,s)&&V(t,s,e[s]);return t};function mt(t,e){return document.createElement(t,e)}function ht(t,e,s){return document.createElementNS(t,e,s)}function gt(){return P(document.createDocumentFragment())}function vt(t){return document.createTextNode(t)}function yt(t){return document.createComment(t)}function xt(t,e,s){if(L(t)){let r=t;for(;r&&L(r);)r=P(r).parent;t=r??t}L(e)&&(e=P(e,t)),s&&L(s)&&(s=P(s).firstChildNode),t.insertBefore(e,s)}function bt(t,e){t.removeChild(e)}function Nt(t,e){L(e)&&(e=P(e,t)),t.appendChild(e)}function nt(t){if(L(t)){for(;t&&L(t);)t=P(t).parent;return t??null}return t.parentNode}function wt(t){var e;if(L(t)){let s=P(t),r=nt(s);if(r&&s.lastChildNode){let i=Array.from(r.childNodes),n=i.indexOf(s.lastChildNode);return(e=i[n+1])!==null&&e!==void 0?e:null}return null}return t.nextSibling}function At(t){return t.tagName}function kt(t,e){t.textContent=e}function Ct(t){return t.textContent}function Et(t){return t.nodeType===1}function St(t){return t.nodeType===3}function It(t){return t.nodeType===8}function L(t){return t.nodeType===11}function P(t,e){var s,r,i;let n=t;return(s=n.parent)!==null&&s!==void 0||(n.parent=e??null),(r=n.firstChildNode)!==null&&r!==void 0||(n.firstChildNode=t.firstChild),(i=n.lastChildNode)!==null&&i!==void 0||(n.lastChildNode=t.lastChild),n}var ot={createElement:mt,createElementNS:ht,createTextNode:vt,createDocumentFragment:gt,createComment:yt,insertBefore:xt,removeChild:bt,appendChild:Nt,parentNode:nt,nextSibling:wt,tagName:At,setTextContent:kt,getTextContent:Ct,isElement:Et,isText:St,isComment:It,isDocumentFragment:L};function F(t,e,s,r,i){let n=e===void 0?void 0:e.key;return{sel:t,data:e,children:s,text:r,elm:i,key:n}}var X=Array.isArray;function j(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function W(t){return t===void 0}function C(t){return t!==void 0}var K=F("",{},[],void 0,void 0);function B(t,e){var s,r;let i=t.key===e.key,n=((s=t.data)===null||s===void 0?void 0:s.is)===((r=e.data)===null||r===void 0?void 0:r.is),l=t.sel===e.sel,c=!t.sel&&t.sel===e.sel?typeof t.text==typeof e.text:!0;return l&&i&&n&&c}function Tt(){throw new Error("The document fragment is not supported on this platform.")}function _t(t,e){return t.isElement(e)}function Lt(t,e){return t.isDocumentFragment(e)}function Ft(t,e,s){var r;let i={};for(let n=e;n<=s;++n){let l=(r=t[n])===null||r===void 0?void 0:r.key;l!==void 0&&(i[l]=n)}return i}var Ot=["create","update","remove","destroy","pre","post"];function Pt(t,e,s){let r={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},i=e!==void 0?e:ot;for(let o of Ot)for(let a of t){let f=a[o];f!==void 0&&r[o].push(f)}function n(o){let a=o.id?"#"+o.id:"",f=o.getAttribute("class"),u=f?"."+f.split(" ").join("."):"";return F(i.tagName(o).toLowerCase()+a+u,{},[],void 0,o)}function l(o){return F(void 0,{},[],void 0,o)}function c(o,a){return function(){if(--a===0){let u=i.parentNode(o);i.removeChild(u,o)}}}function y(o,a){var f,u,m,g;let d,v=o.data;if(v!==void 0){let h=(f=v.hook)===null||f===void 0?void 0:f.init;C(h)&&(h(o),v=o.data)}let p=o.children,x=o.sel;if(x==="!")W(o.text)&&(o.text=""),o.elm=i.createComment(o.text);else if(x!==void 0){let h=x.indexOf("#"),b=x.indexOf(".",h),A=h>0?h:x.length,N=b>0?b:x.length,k=h!==-1||b!==-1?x.slice(0,Math.min(A,N)):x,_=o.elm=C(v)&&C(d=v.ns)?i.createElementNS(d,k,v):i.createElement(k,v);for(A<N&&_.setAttribute("id",x.slice(A+1,N)),b>0&&_.setAttribute("class",x.slice(N+1).replace(/\./g," ")),d=0;d<r.create.length;++d)r.create[d](K,o);if(X(p))for(d=0;d<p.length;++d){let Y=p[d];Y!=null&&i.appendChild(_,y(Y,a))}else j(o.text)&&i.appendChild(_,i.createTextNode(o.text));let U=o.data.hook;C(U)&&((u=U.create)===null||u===void 0||u.call(U,K,o),U.insert&&a.push(o))}else if(!((m=s?.experimental)===null||m===void 0)&&m.fragments&&o.children){for(o.elm=((g=i.createDocumentFragment)!==null&&g!==void 0?g:Tt)(),d=0;d<r.create.length;++d)r.create[d](K,o);for(d=0;d<o.children.length;++d){let h=o.children[d];h!=null&&i.appendChild(o.elm,y(h,a))}}else o.elm=i.createTextNode(o.text);return o.elm}function S(o,a,f,u,m,g){for(;u<=m;++u){let d=f[u];d!=null&&i.insertBefore(o,y(d,g),a)}}function I(o){var a,f;let u=o.data;if(u!==void 0){(f=(a=u?.hook)===null||a===void 0?void 0:a.destroy)===null||f===void 0||f.call(a,o);for(let m=0;m<r.destroy.length;++m)r.destroy[m](o);if(o.children!==void 0)for(let m=0;m<o.children.length;++m){let g=o.children[m];g!=null&&typeof g!="string"&&I(g)}}}function T(o,a,f,u){for(var m,g;f<=u;++f){let d,v,p=a[f];if(p!=null)if(C(p.sel)){I(p),d=r.remove.length+1,v=c(p.elm,d);for(let h=0;h<r.remove.length;++h)r.remove[h](p,v);let x=(g=(m=p?.data)===null||m===void 0?void 0:m.hook)===null||g===void 0?void 0:g.remove;C(x)?x(p,v):v()}else p.children?(I(p),T(o,p.children,0,p.children.length-1)):i.removeChild(o,p.elm)}}function E(o,a,f,u){let m=0,g=0,d=a.length-1,v=a[0],p=a[d],x=f.length-1,h=f[0],b=f[x],A,N,k,_;for(;m<=d&&g<=x;)v==null?v=a[++m]:p==null?p=a[--d]:h==null?h=f[++g]:b==null?b=f[--x]:B(v,h)?(w(v,h,u),v=a[++m],h=f[++g]):B(p,b)?(w(p,b,u),p=a[--d],b=f[--x]):B(v,b)?(w(v,b,u),i.insertBefore(o,v.elm,i.nextSibling(p.elm)),v=a[++m],b=f[--x]):B(p,h)?(w(p,h,u),i.insertBefore(o,p.elm,v.elm),p=a[--d],h=f[++g]):(A===void 0&&(A=Ft(a,m,d)),N=A[h.key],W(N)?i.insertBefore(o,y(h,u),v.elm):(k=a[N],k.sel!==h.sel?i.insertBefore(o,y(h,u),v.elm):(w(k,h,u),a[N]=void 0,i.insertBefore(o,k.elm,v.elm))),h=f[++g]);g<=x&&(_=f[x+1]==null?null:f[x+1].elm,S(o,_,f,g,x,u)),m<=d&&T(o,a,m,d)}function w(o,a,f){var u,m,g,d,v,p,x,h;let b=(u=a.data)===null||u===void 0?void 0:u.hook;(m=b?.prepatch)===null||m===void 0||m.call(b,o,a);let A=a.elm=o.elm;if(o===a)return;if(a.data!==void 0||C(a.text)&&a.text!==o.text){(g=a.data)!==null&&g!==void 0||(a.data={}),(d=o.data)!==null&&d!==void 0||(o.data={});for(let _=0;_<r.update.length;++_)r.update[_](o,a);(x=(p=(v=a.data)===null||v===void 0?void 0:v.hook)===null||p===void 0?void 0:p.update)===null||x===void 0||x.call(p,o,a)}let N=o.children,k=a.children;W(a.text)?C(N)&&C(k)?N!==k&&E(A,N,k,f):C(k)?(C(o.text)&&i.setTextContent(A,""),S(A,null,k,0,k.length-1,f)):C(N)?T(A,N,0,N.length-1):C(o.text)&&i.setTextContent(A,""):o.text!==a.text&&(C(N)&&T(A,N,0,N.length-1),i.setTextContent(A,a.text)),(h=b?.postpatch)===null||h===void 0||h.call(b,o,a)}return function(a,f){let u,m,g,d=[];for(u=0;u<r.pre.length;++u)r.pre[u]();for(_t(i,a)?a=n(a):Lt(i,a)&&(a=l(a)),B(a,f)?w(a,f,d):(m=a.elm,g=i.parentNode(m),y(f,d),g!==null&&(i.insertBefore(g,f.elm,i.nextSibling(m)),T(g,[a],0,0))),u=0;u<d.length;++u)d[u].data.hook.insert(d[u]);for(u=0;u<r.post.length;++u)r.post[u]();return f}}function J(t,e,s){if(t.ns="http://www.w3.org/2000/svg",s!=="foreignObject"&&e!==void 0)for(let r=0;r<e.length;++r){let i=e[r];if(typeof i=="string")continue;let n=i.data;n!==void 0&&J(n,i.children,i.sel)}}function $(t,e,s){let r={},i,n,l;if(s!==void 0?(e!==null&&(r=e),X(s)?i=s:j(s)?n=s.toString():s&&s.sel&&(i=[s])):e!=null&&(X(e)?i=e:j(e)?n=e.toString():e&&e.sel?i=[e]:r=e),i!==void 0)for(l=0;l<i.length;++l)j(i[l])&&(i[l]=F(void 0,void 0,void 0,i[l],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&J(r,i,t),F(t,r,i,n,void 0)}function lt(t,e){let s=e!==void 0?e:ot,r;if(s.isElement(t)){let i=t.id?"#"+t.id:"",n=t.getAttribute("class"),l=n?"."+n.split(" ").join("."):"",c=s.tagName(t).toLowerCase()+i+l,y={},S={},I={},T=[],E,w,o,a=t.attributes,f=t.childNodes;for(w=0,o=a.length;w<o;w++)E=a[w].nodeName,E[0]==="d"&&E[1]==="a"&&E[2]==="t"&&E[3]==="a"&&E[4]==="-"?S[E.slice(5)]=a[w].nodeValue||"":E!=="id"&&E!=="class"&&(y[E]=a[w].nodeValue);for(w=0,o=f.length;w<o;w++)T.push(lt(f[w],e));return Object.keys(y).length>0&&(I.attrs=y),Object.keys(S).length>0&&(I.dataset=S),c[0]==="s"&&c[1]==="v"&&c[2]==="g"&&(c.length===3||c[3]==="."||c[3]==="#")&&J(I,T,c),F(c,I,T,void 0,t)}else return s.isText(t)?(r=s.getTextContent(t),F(void 0,void 0,void 0,r,t)):s.isComment(t)?(r=s.getTextContent(t),F("!",{},[],r,t)):F("",{},[],void 0,t)}var $t="http://www.w3.org/1999/xlink",Bt="http://www.w3.org/XML/1998/namespace",D=58,Mt=120;function Q(t,e){let s,r=e.elm,i=t.data.attrs,n=e.data.attrs;if(!(!i&&!n)&&i!==n){i=i||{},n=n||{};for(s in n){let l=n[s];i[s]!==l&&(l===!0?r.setAttribute(s,""):l===!1?r.removeAttribute(s):s.charCodeAt(0)!==Mt?r.setAttribute(s,l):s.charCodeAt(3)===D?r.setAttributeNS(Bt,s,l):s.charCodeAt(5)===D?r.setAttributeNS($t,s,l):r.setAttribute(s,l))}for(s in i)s in n||r.removeAttribute(s)}}var Ht={create:Q,update:Q};function tt(t,e){let s,r,i=e.elm,n=t.data.class,l=e.data.class;if(!(!n&&!l)&&n!==l){n=n||{},l=l||{};for(r in n)n[r]&&!Object.prototype.hasOwnProperty.call(l,r)&&i.classList.remove(r);for(r in l)s=l[r],s!==n[r]&&i.classList[s?"add":"remove"](r)}}var Ut={create:tt,update:tt};function at(t,e,s){if(typeof t=="function")t.call(e,s,e);else if(typeof t=="object")for(let r=0;r<t.length;r++)at(t[r],e,s)}function jt(t,e){let s=t.type,r=e.data.on;r&&r[s]&&at(r[s],e,t)}function Wt(){return function t(e){jt(e,t.vnode)}}function z(t,e){let s=t.data.on,r=t.listener,i=t.elm,n=e&&e.data.on,l=e&&e.elm,c;if(s!==n){if(s&&r)if(n)for(c in s)n[c]||i.removeEventListener(c,r,!1);else for(c in s)i.removeEventListener(c,r,!1);if(n){let y=e.listener=t.listener||Wt();if(y.vnode=e,s)for(c in n)s[c]||l.addEventListener(c,y,!1);else for(c in n)l.addEventListener(c,y,!1)}}}var Kt={create:z,update:z,destroy:z};function et(t,e){let s,r,i,n=e.elm,l=t.data.props,c=e.data.props;if(!(!l&&!c)&&l!==c){l=l||{},c=c||{};for(s in c)r=c[s],i=l[s],i!==r&&(s!=="value"||n[s]!==r)&&(n[s]=r)}}var zt={create:et,update:et},rt=typeof window<"u"&&window.requestAnimationFrame.bind(window)||setTimeout,Rt=function(t){rt(function(){rt(t)})},G=!1;function qt(t,e,s){Rt(function(){t[e]=s})}function st(t,e){let s,r,i=e.elm,n=t.data.style,l=e.data.style;if(!n&&!l||n===l)return;n=n||{},l=l||{};let c="delayed"in n;for(r in n)l[r]||(r[0]==="-"&&r[1]==="-"?i.style.removeProperty(r):i.style[r]="");for(r in l)if(s=l[r],r==="delayed"&&l.delayed)for(let y in l.delayed)s=l.delayed[y],(!c||s!==n.delayed[y])&&qt(i.style,y,s);else r!=="remove"&&s!==n[r]&&(r[0]==="-"&&r[1]==="-"?i.style.setProperty(r,s):i.style[r]=s)}function Xt(t){let e,s,r=t.elm,i=t.data.style;if(!(!i||!(e=i.destroy)))for(s in e)r.style[s]=e[s]}function Gt(t,e){let s=t.data.style;if(!s||!s.remove){e();return}G||(t.elm.offsetLeft,G=!0);let r,i=t.elm,n=0,l=s.remove,c=0,y=[];for(r in l)y.push(r),i.style[r]=l[r];let I=getComputedStyle(i)["transition-property"].split(", ");for(;n<I.length;++n)y.indexOf(I[n])!==-1&&c++;i.addEventListener("transitionend",function(T){T.target===i&&--c,c===0&&e()})}function Jt(){G=!1}var Yt={pre:Jt,create:st,update:st,destroy:Xt,remove:Gt};function H(t,e){if(e[t]!==void 0&&typeof e[t]=="function"&&e[t]()||t.substring(0,1)==="!"&&e[t.slice(1)]!==void 0&&!e[t.slice(1)]||t.substring(0,1)!=="!"&&e[t]!==void 0&&e[t])return!0;if(t.substring(0,1)==="!"&&e[t.slice(1)]===void 0||t.substring(0,1)!=="!"&&e[t]===void 0)throw new Error(`${t} not found in state`);return!1}function M(t,e){let s=["id","name","style","placeholder","ref","href","src","target","aria-label","disabled","hidden","selected","for","type","max","min","accept","accept-charset","accesskey","action","align","allow","alt","async","autocapitalize","autocomplete","autofocus","autoplay","bgcolor","buffered","capture","charset","checked","cite","code","codebase","color","cols","colspan","content","contenteditable","disabled","draggable"],r={};return s.forEach(i=>{let n=e.getAttribute(i);n!==null&&(r[i]=n||!0)}),O(O({},r),t)}function Zt(t,e){let s=["xmlns","fill","viewBox","stroke-width","stroke","stroke-linecap","stroke-linejoin","d","x1","x2","y1","y2"],r={};return s.forEach(i=>{let n=e.getAttribute(i);n!==null&&(Number.parseFloat(n)?r[i]=Number.parseFloat(n):Number.parseInt(n)?r[i]=Number.parseInt(n):r[i]=n||!0)}),O(O({},r),t)}function ct(t,e){let s=t.getAttribute("class"),r=t.getAttribute("@class"),i,n=null,l={};if(r){if([n,i]=r.split("=>"),i===void 0&&n===void 0)throw new Error("Truth check and classes must be provided when @class is set. Please remove if not needed.");if(n&&i===void 0)throw new Error(`Classes must be provided after the => for truth check ${n}`);if(n===void 0)throw new Error("A truth check must be provided before the => in @class");{let[c,y]=i.split("||");H(n.trim(),e)?i=c:i=y}}return(s||i)&&((s||"")+(i?" "+i:"")).split(" ").filter(c=>c.trim()!=="").forEach(c=>{l[c]=!0}),l}var Vt=t=>{let e=t.replace(/\D/g,"").substring(0,10),s=e.substring(0,3),r=e.substring(3,6),i=e.substring(6,10);return e.length>6?t=`(${s}) ${r} - ${i}`:e.length>3?t=`(${s}) ${r}`:e.length>0&&(t=`(${s}`),t},Dt=(t,e)=>{let[s,r]=e?.split("|")||"",n=+t.replace(".","").replace(",","").replace(/\D/g,"");if(isNaN(n))throw new Error(`Value provided to currency is not a number: ${t}`);return new Intl.NumberFormat(s||"en-US",{currency:r||"USD",style:"currency"}).format(n/100)},Qt=t=>{let e=t.replace(/\D/g,"").slice(0,10);return e.length>=5?`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,8)}`:e.length>=3?`${e.slice(0,2)}/${e.slice(2)}`:e},te={phone:Vt,currency:Dt,date:Qt},R=te,it=class{constructor(t,e){this.elements=[],this.elements=t,this.patch=e}generateVNodes(t,e){let s={ifIsFalse:!1,elseIfIsFalse:!1,elseIfPresent:!1};return Array.from(t).map(r=>{let i={};switch(r.nodeType){case 1:return this.generateVNodeForElement(r,s,e,i);case 3:return r.textContent||"";default:return $(r.nodeName,i,r.childNodes.length>0?this.generateVNodes(r.childNodes,e):[])}})}iterateOverLoops(t,e){Array.from(t.children).forEach(s=>{var r;let i=s.getAttribute("@for");if(i){let[n,l]=i.split("in");if(e[l.trim()]===void 0)throw new Error(`${l.trim()} does not exist in the object.`);this.loopNodeCreations(s,e,l,n),(r=s.parentElement)==null||r.removeAttribute("@for"),s.remove()}s.children.length>0&&this.iterateOverLoops(s,e)})}updateByElement(t){let e=this.elements.find(i=>i.object===t);if(!e)throw new Error("Value updated in state, but the associated object could not be found in memory.");let s=e.element.cloneNode(!0);this.iterateOverLoops(e.element,e.object);let r=this.generateVNodes(e.element.childNodes,e.object);if(e.element=s,r.length>0&&e.vNode.sel&&e.vNode.data){e.vNode.data=M({},e.element);let i=$(e.vNode.sel,e.vNode.data,r);this.patch(e.vNode,i),e.vNode=i}}loopNodeCreations(t,e,s,r){e[s.trim()].forEach(i=>{let n=t.cloneNode(!0);n.childNodes.forEach(l=>{l.nodeType===1&&this.updateLoopElement(l,i,r)}),t.before(n)})}updateLoopElement(t,e,s){this.handleLoopTextAttr(t,e,s),this.handleLoopHrefAttr(t,e),this.handleLoopIfAttr(t,e),this.handleLoopClassAttr(t,e),t.hasChildNodes()&&t.childNodes.forEach(r=>{r.nodeType===1&&this.updateLoopElement(r,e,s)})}handleLoopTextAttr(t,e,s){if(t.hasAttribute("@text")){let r=t.getAttribute("@text");r&&(s.trim()==="_"?t.innerText=e[r]:t.innerText=e,t.removeAttribute("@text"))}}handleLoopHrefAttr(t,e){if(t.hasAttribute("@href")){let s=t.getAttribute("@href"),r=e[s];if(r===void 0)throw new Error(`${s} not found in this iteration.`);t.setAttribute("href",r),t.removeAttribute("@href")}}handleLoopIfAttr(t,e){if(t.hasAttribute("@if")){let s=t.getAttribute("@if");H(s,e)?t.removeAttribute("@if"):t.remove()}}handleLoopClassAttr(t,e){if(t.hasAttribute("@class")){let s=t.getAttribute("class"),r=t.getAttribute("@class"),i,n;if([n,i]=r.split("=>"),i===void 0&&n===void 0)throw new Error("Truth check and classes must be provided when @class is set. Please remove if not needed.");if(n&&i===void 0)throw new Error(`Classes must be provided after the => for truth check ${n}`);if(n===void 0)throw new Error("A truth check must be provided before the => in @class");{let[l,c]=i.split("||");H(n.trim(),e)?i=l:i=c}(s||i)&&t.setAttribute("class",(s||"")+(i?" "+i:"")),t.removeAttribute("@class")}}generateVNodeForElement(t,e,s,r){let i=t;if(this.shouldNotIncludeCheck(i,e,s))return"";let n=i.getAttribute("@href");if(n){if(s[n]===void 0)throw new Error(`Could not find ${n} in the object.`);i.setAttribute("href",s[n])}switch(r.props=M({},i),r.attrs=Zt({},i),r.class=ct(i,s),i.nodeName){case"INPUT":{let l=this.generateInputProps(i,s),c=y=>{this.updateState(y)};return r.props=M(O(O({},l),r.props),i),r.on={input:c},this.generateVNode(t,i,s,r)}case"BUTTON":return this.attachListenersToButton(i,s,r),this.generateVNode(t,i,s,r);default:return this.generateVNode(t,i,s,r)}}attachListenersToButton(t,e,s){let r=t.getAttribute("@click");if(r){let i=e[r];if(typeof i!="function"&&typeof e[r.slice(0,-2)]!="function")throw new Error(`${r} was not found as a method`);let n=l=>{let c=null;if(l.target){let y=l.target;c=this.elements.findIndex(S=>S.id===this.findSpargoParentNodeLocalName(y.parentNode)),this.elements[c].object[i?r:r.slice(0,-2)]()}};s.on={click:n}}}generateInputProps(t,e){var s;let r=t.getAttribute("@sync");if(!r)throw new Error("It is expected that all input's are synced to a piece of data.");let i=e[r];if(i===void 0&&!((s=Object.getOwnPropertyDescriptor(e,r))!=null&&s.set))throw new Error(`${r} does not exist.`);let n=t.getAttribute("@mask");if(n&&R[n]===void 0)throw new Error(`The @mask ${n} does not exist.`);let l=t.getAttribute("@mask-args");return{value:i,sync:r,mask:n,maskArgs:l}}shouldNotIncludeCheck(t,e,s){let r=t.getAttribute("@if");if(r&&!H(r,s))return e.ifIsFalse=!0,!0;let i=t.getAttribute("@elseif"),n=t.getAttribute("@else")!==null;return i&&(e.elseIfPresent=!0),!i&&!n&&(e.ifIsFalse=!1,e.elseIfIsFalse=!1,e.elseIfPresent=!1),!e.ifIsFalse&&i?!0:i&&!H(i,s)?(e.elseIfIsFalse=!0,!0):(!e.ifIsFalse||e.elseIfPresent&&!e.elseIfIsFalse)&&n?!0:(n&&(e.ifIsFalse=!1,e.elseIfIsFalse=!1,e.elseIfPresent=!1),!1)}generateVNode(t,e,s,r){let i=this.textNode(e,s,r);if(i)return i;let n=this.nodeWithTextContent(e,r);return n||$(t.nodeName,r,t.childNodes.length>0?this.generateVNodes(t.childNodes,s):[])}nodeWithTextContent(t,e){var s;if(((s=t.textContent)==null?void 0:s.trim())!==""&&t.children.length===0)return e.props=M(O({},e.props),t),$(t.nodeName,e,t.textContent)}textNode(t,e,s){let r=t.getAttribute("@text");if(r){if(e[r]===void 0)throw new Error(`${r} does not exist in the object.`);return s.props=M(O({text:r},s.props),t),$(t.nodeName,s,e[r])}}updateState(t){if(t.target){let e=t.target,s=this.elements.findIndex(i=>i.id===this.findSpargoParentNodeLocalName(e.parentNode));if(s<0)throw new Error(`Element with id of ${e.parentNode.localName} not found in memory`);let r=this.elements[s];this.retrieveNodeChildren(r.vNode.children,r,t)}}findSpargoParentNodeLocalName(t){return t.localName.includes("spargo-")?t.localName:t.parentNode&&t.parentNode.localName.includes("spargo-")?t.parentNode.localName:this.findSpargoParentNodeLocalName(t.parentNode)}retrieveNodeChildren(t,e,s){let r=s.target,i=e.object;t?.map(n=>{typeof n!="string"&&n.children&&n.children.length>0?this.retrieveNodeChildren(n.children,e,s):typeof n!="string"&&n.data&&n.data.props&&n.data.props.sync&&n.data.props.sync===r.sync&&(n.data.props.mask?(n.data.props.maskArgs?i[n.data.props.sync]=R[n.data.props.mask](r.value,n.data.props.maskArgs):i[n.data.props.sync]=R[n.data.props.mask](r.value),r.value=i[n.data.props.sync]):i[n.data.props.sync]=r.value)})}},q=Pt([Ut,zt,Yt,Ht,Kt]),ee=class{constructor(){this.elements=[],this.vdom=new it([],q),window.addEventListener("DOMContentLoaded",()=>{this.vdom=new it(this.elements,q),this.initialize()})}initialize(){document.querySelectorAll("[ignite]").forEach(e=>{this.createElement(e)})}createElement(t){if(t.getAttribute("spargo-id"))return;let e=window[t.getAttribute("ignite")]();if(!e)throw new Error(`${t.getAttribute("ignite")} does not exist as a method on the page.`);let s=`spargo-${crypto.randomUUID()}`,r=t.cloneNode(!0);this.vdom.iterateOverLoops(t,e);let i=$(s,{class:ct(t,e)},this.vdom.generateVNodes(t.childNodes,e));q(lt(t),i);let n=new Proxy(e,{set:(l,c,y,S)=>(typeof c=="string"&&(l[c]=y),this.vdom.updateByElement(S),!0)});this.elements.push({id:s,vNode:i,object:n,element:r}),typeof n.ignited=="function"&&n.ignited()}},ft=ee;new ft;
