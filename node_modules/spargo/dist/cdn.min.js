"use strict";(()=>{var xe=Object.defineProperty;var le=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ae=(s,e,t)=>e in s?xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,F=(s,e)=>{for(var t in e||={})be.call(e,t)&&ae(s,t,e[t]);if(le)for(var t of le(e))Ne.call(e,t)&&ae(s,t,e[t]);return s};function Ee(s,e){return document.createElement(s,e)}function ve(s,e,t){return document.createElementNS(s,e,t)}function Ae(){return $(document.createDocumentFragment())}function ke(s){return document.createTextNode(s)}function we(s){return document.createComment(s)}function Ce(s,e,t){if(P(s)){let n=s;for(;n&&P(n);)n=$(n).parent;s=n??s}P(e)&&(e=$(e,s)),t&&P(t)&&(t=$(t).firstChildNode),s.insertBefore(e,t)}function Ie(s,e){s.removeChild(e)}function Te(s,e){P(e)&&(e=$(e,s)),s.appendChild(e)}function fe(s){if(P(s)){for(;s&&P(s);)s=$(s).parent;return s??null}return s.parentNode}function Oe(s){var e;if(P(s)){let t=$(s),n=fe(t);if(n&&t.lastChildNode){let r=Array.from(n.childNodes),i=r.indexOf(t.lastChildNode);return(e=r[i+1])!==null&&e!==void 0?e:null}return null}return s.nextSibling}function Se(s){return s.tagName}function Le(s,e){s.textContent=e}function Fe(s){return s.textContent}function Pe(s){return s.nodeType===1}function je(s){return s.nodeType===3}function $e(s){return s.nodeType===8}function P(s){return s.nodeType===11}function $(s,e){var t,n,r;let i=s;return(t=i.parent)!==null&&t!==void 0||(i.parent=e??null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=s.firstChild),(r=i.lastChildNode)!==null&&r!==void 0||(i.lastChildNode=s.lastChild),i}var W={createElement:Ee,createElementNS:ve,createTextNode:ke,createDocumentFragment:Ae,createComment:we,insertBefore:Ce,removeChild:Ie,appendChild:Te,parentNode:fe,nextSibling:Oe,tagName:Se,setTextContent:Le,getTextContent:Fe,isElement:Pe,isText:je,isComment:$e,isDocumentFragment:P};function O(s,e,t,n,r){let i=e===void 0?void 0:e.key;return{sel:s,data:e,children:t,text:n,elm:r,key:i}}var B=Array.isArray;function _(s){return typeof s=="string"||typeof s=="number"||s instanceof String||s instanceof Number}function G(s){return s===void 0}function C(s){return s!==void 0}var J=O("",{},[],void 0,void 0);function H(s,e){var t,n;let r=s.key===e.key,i=((t=s.data)===null||t===void 0?void 0:t.is)===((n=e.data)===null||n===void 0?void 0:n.is),o=s.sel===e.sel,f=!s.sel&&s.sel===e.sel?typeof s.text==typeof e.text:!0;return o&&r&&i&&f}function _e(){throw new Error("The document fragment is not supported on this platform.")}function Ve(s,e){return s.isElement(e)}function Me(s,e){return s.isDocumentFragment(e)}function Be(s,e,t){var n;let r={};for(let i=e;i<=t;++i){let o=(n=s[i])===null||n===void 0?void 0:n.key;o!==void 0&&(r[o]=i)}return r}var He=["create","update","remove","destroy","pre","post"];function Y(s,e,t){let n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},r=e!==void 0?e:W;for(let l of He)for(let a of s){let c=a[l];c!==void 0&&n[l].push(c)}function i(l){let a=l.id?"#"+l.id:"",c=l.getAttribute("class"),u=c?"."+c.split(" ").join("."):"";return O(r.tagName(l).toLowerCase()+a+u,{},[],void 0,l)}function o(l){return O(void 0,{},[],void 0,l)}function f(l,a){return function(){if(--a===0){let u=r.parentNode(l);r.removeChild(u,l)}}}function m(l,a){var c,u,g,y;let d,x=l.data;if(x!==void 0){let h=(c=x.hook)===null||c===void 0?void 0:c.init;C(h)&&(h(l),x=l.data)}let p=l.children,b=l.sel;if(b==="!")G(l.text)&&(l.text=""),l.elm=r.createComment(l.text);else if(b!==void 0){let h=b.indexOf("#"),N=b.indexOf(".",h),k=h>0?h:b.length,E=N>0?N:b.length,w=h!==-1||N!==-1?b.slice(0,Math.min(k,E)):b,L=l.elm=C(x)&&C(d=x.ns)?r.createElementNS(d,w,x):r.createElement(w,x);for(k<E&&L.setAttribute("id",b.slice(k+1,E)),N>0&&L.setAttribute("class",b.slice(E+1).replace(/\./g," ")),d=0;d<n.create.length;++d)n.create[d](J,l);if(B(p))for(d=0;d<p.length;++d){let oe=p[d];oe!=null&&r.appendChild(L,m(oe,a))}else _(l.text)&&r.appendChild(L,r.createTextNode(l.text));let U=l.data.hook;C(U)&&((u=U.create)===null||u===void 0||u.call(U,J,l),U.insert&&a.push(l))}else if(!((g=t?.experimental)===null||g===void 0)&&g.fragments&&l.children){for(l.elm=((y=r.createDocumentFragment)!==null&&y!==void 0?y:_e)(),d=0;d<n.create.length;++d)n.create[d](J,l);for(d=0;d<l.children.length;++d){let h=l.children[d];h!=null&&r.appendChild(l.elm,m(h,a))}}else l.elm=r.createTextNode(l.text);return l.elm}function I(l,a,c,u,g,y){for(;u<=g;++u){let d=c[u];d!=null&&r.insertBefore(l,m(d,y),a)}}function A(l){var a,c;let u=l.data;if(u!==void 0){(c=(a=u?.hook)===null||a===void 0?void 0:a.destroy)===null||c===void 0||c.call(a,l);for(let g=0;g<n.destroy.length;++g)n.destroy[g](l);if(l.children!==void 0)for(let g=0;g<l.children.length;++g){let y=l.children[g];y!=null&&typeof y!="string"&&A(y)}}}function S(l,a,c,u){for(var g,y;c<=u;++c){let d,x,p=a[c];if(p!=null)if(C(p.sel)){A(p),d=n.remove.length+1,x=f(p.elm,d);for(let h=0;h<n.remove.length;++h)n.remove[h](p,x);let b=(y=(g=p?.data)===null||g===void 0?void 0:g.hook)===null||y===void 0?void 0:y.remove;C(b)?b(p,x):x()}else p.children?(A(p),S(l,p.children,0,p.children.length-1)):r.removeChild(l,p.elm)}}function T(l,a,c,u){let g=0,y=0,d=a.length-1,x=a[0],p=a[d],b=c.length-1,h=c[0],N=c[b],k,E,w,L;for(;g<=d&&y<=b;)x==null?x=a[++g]:p==null?p=a[--d]:h==null?h=c[++y]:N==null?N=c[--b]:H(x,h)?(v(x,h,u),x=a[++g],h=c[++y]):H(p,N)?(v(p,N,u),p=a[--d],N=c[--b]):H(x,N)?(v(x,N,u),r.insertBefore(l,x.elm,r.nextSibling(p.elm)),x=a[++g],N=c[--b]):H(p,h)?(v(p,h,u),r.insertBefore(l,p.elm,x.elm),p=a[--d],h=c[++y]):(k===void 0&&(k=Be(a,g,d)),E=k[h.key],G(E)?r.insertBefore(l,m(h,u),x.elm):(w=a[E],w.sel!==h.sel?r.insertBefore(l,m(h,u),x.elm):(v(w,h,u),a[E]=void 0,r.insertBefore(l,w.elm,x.elm))),h=c[++y]);y<=b&&(L=c[b+1]==null?null:c[b+1].elm,I(l,L,c,y,b,u)),g<=d&&S(l,a,g,d)}function v(l,a,c){var u,g,y,d,x,p,b,h;let N=(u=a.data)===null||u===void 0?void 0:u.hook;(g=N?.prepatch)===null||g===void 0||g.call(N,l,a);let k=a.elm=l.elm;if(l===a)return;if(a.data!==void 0||C(a.text)&&a.text!==l.text){(y=a.data)!==null&&y!==void 0||(a.data={}),(d=l.data)!==null&&d!==void 0||(l.data={});for(let L=0;L<n.update.length;++L)n.update[L](l,a);(b=(p=(x=a.data)===null||x===void 0?void 0:x.hook)===null||p===void 0?void 0:p.update)===null||b===void 0||b.call(p,l,a)}let E=l.children,w=a.children;G(a.text)?C(E)&&C(w)?E!==w&&T(k,E,w,c):C(w)?(C(l.text)&&r.setTextContent(k,""),I(k,null,w,0,w.length-1,c)):C(E)?S(k,E,0,E.length-1):C(l.text)&&r.setTextContent(k,""):l.text!==a.text&&(C(E)&&S(k,E,0,E.length-1),r.setTextContent(k,a.text)),(h=N?.postpatch)===null||h===void 0||h.call(N,l,a)}return function(a,c){let u,g,y,d=[];for(u=0;u<n.pre.length;++u)n.pre[u]();for(Ve(r,a)?a=i(a):Me(r,a)&&(a=o(a)),H(a,c)?v(a,c,d):(g=a.elm,y=r.parentNode(g),m(c,d),y!==null&&(r.insertBefore(y,c.elm,r.nextSibling(g)),S(y,[a],0,0))),u=0;u<d.length;++u)d[u].data.hook.insert(d[u]);for(u=0;u<n.post.length;++u)n.post[u]();return c}}function K(s,e,t){if(s.ns="http://www.w3.org/2000/svg",t!=="foreignObject"&&e!==void 0)for(let n=0;n<e.length;++n){let r=e[n];if(typeof r=="string")continue;let i=r.data;i!==void 0&&K(i,r.children,r.sel)}}function j(s,e,t){let n={},r,i,o;if(t!==void 0?(e!==null&&(n=e),B(t)?r=t:_(t)?i=t.toString():t&&t.sel&&(r=[t])):e!=null&&(B(e)?r=e:_(e)?i=e.toString():e&&e.sel?r=[e]:n=e),r!==void 0)for(o=0;o<r.length;++o)_(r[o])&&(r[o]=O(void 0,void 0,void 0,r[o],void 0));return s[0]==="s"&&s[1]==="v"&&s[2]==="g"&&(s.length===3||s[3]==="."||s[3]==="#")&&K(n,r,s),O(s,n,r,i,void 0)}function z(s,e){let t=e!==void 0?e:W,n;if(t.isElement(s)){let r=s.id?"#"+s.id:"",i=s.getAttribute("class"),o=i?"."+i.split(" ").join("."):"",f=t.tagName(s).toLowerCase()+r+o,m={},I={},A={},S=[],T,v,l,a=s.attributes,c=s.childNodes;for(v=0,l=a.length;v<l;v++)T=a[v].nodeName,T[0]==="d"&&T[1]==="a"&&T[2]==="t"&&T[3]==="a"&&T[4]==="-"?I[T.slice(5)]=a[v].nodeValue||"":T!=="id"&&T!=="class"&&(m[T]=a[v].nodeValue);for(v=0,l=c.length;v<l;v++)S.push(z(c[v],e));return Object.keys(m).length>0&&(A.attrs=m),Object.keys(I).length>0&&(A.dataset=I),f[0]==="s"&&f[1]==="v"&&f[2]==="g"&&(f.length===3||f[3]==="."||f[3]==="#")&&K(A,S,f),O(f,A,S,void 0,s)}else return t.isText(s)?(n=t.getTextContent(s),O(void 0,void 0,void 0,n,s)):t.isComment(s)?(n=t.getTextContent(s),O("!",{},[],n,s)):O("",{},[],void 0,s)}var De="http://www.w3.org/1999/xlink",Ue="http://www.w3.org/XML/1998/namespace";function ue(s,e){let t,n=e.elm,r=s.data.attrs,i=e.data.attrs;if(!(!r&&!i)&&r!==i){r=r||{},i=i||{};for(t in i){let o=i[t];r[t]!==o&&(o===!0?n.setAttribute(t,""):o===!1?n.removeAttribute(t):t.charCodeAt(0)!==120?n.setAttribute(t,o):t.charCodeAt(3)===58?n.setAttributeNS(Ue,t,o):t.charCodeAt(5)===58?n.setAttributeNS(De,t,o):n.setAttribute(t,o))}for(t in r)t in i||n.removeAttribute(t)}}var Z={create:ue,update:ue};function de(s,e){let t,n,r=e.elm,i=s.data.class,o=e.data.class;if(!(!i&&!o)&&i!==o){i=i||{},o=o||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(o,n)&&r.classList.remove(n);for(n in o)t=o[n],t!==i[n]&&r.classList[t?"add":"remove"](n)}}var Q={create:de,update:de};function pe(s,e,t){if(typeof s=="function")s.call(e,t,e);else if(typeof s=="object")for(let n=0;n<s.length;n++)pe(s[n],e,t)}function We(s,e){let t=s.type,n=e.data.on;n&&n[t]&&pe(n[t],e,s)}function Ke(){return function s(e){We(e,s.vnode)}}function ee(s,e){let t=s.data.on,n=s.listener,r=s.elm,i=e&&e.data.on,o=e&&e.elm,f;if(t!==i){if(t&&n)if(i)for(f in t)i[f]||r.removeEventListener(f,n,!1);else for(f in t)r.removeEventListener(f,n,!1);if(i){let m=e.listener=s.listener||Ke();if(m.vnode=e,t)for(f in i)t[f]||o.addEventListener(f,m,!1);else for(f in i)o.addEventListener(f,m,!1)}}}var te={create:ee,update:ee,destroy:ee};function me(s,e){let t,n,r,i=e.elm,o=s.data.props,f=e.data.props;if(!(!o&&!f)&&o!==f){o=o||{},f=f||{};for(t in f)n=f[t],r=o[t],r!==n&&(t!=="value"||i[t]!==n)&&(i[t]=n)}}var ne={create:me,update:me};var ge=typeof window<"u"&&window.requestAnimationFrame.bind(window)||setTimeout,ze=function(s){ge(function(){ge(s)})},re=!1;function Re(s,e,t){ze(function(){s[e]=t})}function he(s,e){let t,n,r=e.elm,i=s.data.style,o=e.data.style;if(!i&&!o||i===o)return;i=i||{},o=o||{};let f="delayed"in i;for(n in i)o[n]||(n[0]==="-"&&n[1]==="-"?r.style.removeProperty(n):r.style[n]="");for(n in o)if(t=o[n],n==="delayed"&&o.delayed)for(let m in o.delayed)t=o.delayed[m],(!f||t!==i.delayed[m])&&Re(r.style,m,t);else n!=="remove"&&t!==i[n]&&(n[0]==="-"&&n[1]==="-"?r.style.setProperty(n,t):r.style[n]=t)}function qe(s){let e,t,n=s.elm,r=s.data.style;if(!(!r||!(e=r.destroy)))for(t in e)n.style[t]=e[t]}function Xe(s,e){let t=s.data.style;if(!t||!t.remove){e();return}re||(s.elm.offsetLeft,re=!0);let n,r=s.elm,i=0,o=t.remove,f=0,m=[];for(n in o)m.push(n),r.style[n]=o[n];let A=getComputedStyle(r)["transition-property"].split(", ");for(;i<A.length;++i)m.indexOf(A[i])!==-1&&f++;r.addEventListener("transitionend",function(S){S.target===r&&--f,f===0&&e()})}function Ge(){re=!1}var se={pre:Ge,create:he,update:he,destroy:qe,remove:Xe};function V(s,e){if(e[s]!==void 0&&typeof e[s]=="function"&&e[s]()||s.substring(0,1)==="!"&&e[s.slice(1)]!==void 0&&!e[s.slice(1)]||s.substring(0,1)!=="!"&&e[s]!==void 0&&e[s])return!0;if(s.substring(0,1)==="!"&&e[s.slice(1)]===void 0||s.substring(0,1)!=="!"&&e[s]===void 0)throw new Error(`${s} not found in state`);return!1}function M(s,e){let t=["id","name","style","placeholder","ref","href","src","target","aria-label","disabled","hidden","selected","for","type","max","min","accept","accept-charset","accesskey","action","align","allow","alt","async","autocapitalize","autocomplete","autofocus","autoplay","bgcolor","buffered","capture","charset","checked","cite","code","codebase","color","cols","colspan","content","contenteditable","disabled","draggable"],n={};return t.forEach(r=>{let i=e.getAttribute(r);i!==null&&(n[r]=i||!0)}),F(F({},n),s)}function ye(s,e){let t=["xmlns","fill","viewBox","stroke-width","stroke","stroke-linecap","stroke-linejoin","d","x1","x2","y1","y2"],n={};return t.forEach(r=>{let i=e.getAttribute(r);i!==null&&(Number.parseFloat(i)?n[r]=Number.parseFloat(i):Number.parseInt(i)?n[r]=Number.parseInt(i):n[r]=i||!0)}),F(F({},n),s)}function R(s,e){let t=s.getAttribute("class"),n=s.getAttribute("@class"),r,i=null,o={};if(n){if([i,r]=n.split("=>"),r===void 0&&i===void 0)throw new Error("Truth check and classes must be provided when @class is set. Please remove if not needed.");if(i&&r===void 0)throw new Error(`Classes must be provided after the => for truth check ${i}`);if(i===void 0)throw new Error("A truth check must be provided before the => in @class");{let[f,m]=r.split("||");V(i.trim(),e)?r=f:r=m}}return(t||r)&&((t||"")+(r?" "+r:"")).split(" ").filter(f=>f.trim()!=="").forEach(f=>{o[f]=!0}),o}var Je=s=>{let e=s.replace(/\D/g,"").substring(0,10),t=e.substring(0,3),n=e.substring(3,6),r=e.substring(6,10);return e.length>6?s=`(${t}) ${n} - ${r}`:e.length>3?s=`(${t}) ${n}`:e.length>0&&(s=`(${t}`),s},Ye=(s,e)=>{let[t,n]=(e==null?void 0:e.split("|"))||"",i=+s.replace(".","").replace(",","").replace(/\D/g,"");if(isNaN(i))throw new Error(`Value provided to currency is not a number: ${s}`);return new Intl.NumberFormat(t||"en-US",{currency:n||"USD",style:"currency"}).format(i/100)},Ze=s=>{let e=s.replace(/\D/g,"").slice(0,10);return e.length>=5?`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,8)}`:e.length>=3?`${e.slice(0,2)}/${e.slice(2)}`:e},Qe={phone:Je,currency:Ye,date:Ze},q=Qe;var D=class{constructor(e,t){this.elements=[];this.elements=e,this.patch=t}generateVNodes(e,t){let n={ifIsFalse:!1,elseIfIsFalse:!1,elseIfPresent:!1};return Array.from(e).map(r=>{let i={};switch(r.nodeType){case 1:return this.generateVNodeForElement(r,n,t,i);case 3:return r.textContent||"";default:return j(r.nodeName,i,r.childNodes.length>0?this.generateVNodes(r.childNodes,t):[])}})}iterateOverLoops(e,t){Array.from(e.children).forEach(n=>{var i;let r=n.getAttribute("@for");if(r){let[o,f]=r.split("in");if(t[f.trim()]===void 0)throw new Error(`${f.trim()} does not exist in the object.`);this.loopNodeCreations(n,t,f,o),(i=n.parentElement)==null||i.removeAttribute("@for"),n.remove()}n.children.length>0&&this.iterateOverLoops(n,t)})}updateByElement(e){let t=this.elements.find(i=>i.object===e);if(!t)throw new Error("Value updated in state, but the associated object could not be found in memory.");let n=t.element.cloneNode(!0);this.iterateOverLoops(t.element,t.object);let r=this.generateVNodes(t.element.childNodes,t.object);if(t.element=n,r.length>0&&t.vNode.sel&&t.vNode.data){t.vNode.data=M({},t.element);let i=j(t.vNode.sel,t.vNode.data,r);this.patch(t.vNode,i),t.vNode=i}}loopNodeCreations(e,t,n,r){t[n.trim()].forEach(i=>{let o=e.cloneNode(!0);o.childNodes.forEach(f=>{f.nodeType===1&&this.updateLoopElement(f,i,r)}),e.before(o)})}updateLoopElement(e,t,n){this.handleLoopTextAttr(e,t,n),this.handleLoopHrefAttr(e,t),this.handleLoopIfAttr(e,t),this.handleLoopClassAttr(e,t),e.hasChildNodes()&&e.childNodes.forEach(r=>{r.nodeType===1&&this.updateLoopElement(r,t,n)})}handleLoopTextAttr(e,t,n){if(e.hasAttribute("@text")){let r=e.getAttribute("@text");r&&(n.trim()==="_"?e.innerText=t[r]:e.innerText=t,e.removeAttribute("@text"))}}handleLoopHrefAttr(e,t){if(e.hasAttribute("@href")){let n=e.getAttribute("@href"),r=t[n];if(r===void 0)throw new Error(`${n} not found in this iteration.`);e.setAttribute("href",r),e.removeAttribute("@href")}}handleLoopIfAttr(e,t){if(e.hasAttribute("@if")){let n=e.getAttribute("@if");V(n,t)?e.removeAttribute("@if"):e.remove()}}handleLoopClassAttr(e,t){if(e.hasAttribute("@class")){let n=e.getAttribute("class"),r=e.getAttribute("@class"),i,o;if([o,i]=r.split("=>"),i===void 0&&o===void 0)throw new Error("Truth check and classes must be provided when @class is set. Please remove if not needed.");if(o&&i===void 0)throw new Error(`Classes must be provided after the => for truth check ${o}`);if(o===void 0)throw new Error("A truth check must be provided before the => in @class");{let[f,m]=i.split("||");V(o.trim(),t)?i=f:i=m}(n||i)&&e.setAttribute("class",(n||"")+(i?" "+i:"")),e.removeAttribute("@class")}}generateVNodeForElement(e,t,n,r){let i=e;if(this.shouldNotIncludeCheck(i,t,n))return"";let o=i.getAttribute("@href");if(o){if(n[o]===void 0)throw new Error(`Could not find ${o} in the object.`);i.setAttribute("href",n[o])}switch(r.props=M({},i),r.attrs=ye({},i),r.class=R(i,n),i.nodeName){case"INPUT":{let f=this.generateInputProps(i,n),m=I=>{this.updateState(I)};return r.props=M(F(F({},f),r.props),i),r.on={input:m},this.generateVNode(e,i,n,r)}case"BUTTON":return this.attachListenersToButton(i,n,r),this.generateVNode(e,i,n,r);default:return this.generateVNode(e,i,n,r)}}attachListenersToButton(e,t,n){let r=e.getAttribute("@click");if(r){let i=t[r];if(typeof i!="function"&&typeof t[r.slice(0,-2)]!="function")throw new Error(`${r} was not found as a method`);let o=f=>{let m=null;if(f.target){let I=f.target;m=this.elements.findIndex(A=>A.id===this.findSpargoParentNodeLocalName(I.parentNode)),this.elements[m].object[i?r:r.slice(0,-2)]()}};n.on={click:o}}}generateInputProps(e,t){var f;let n=e.getAttribute("@sync");if(!n)throw new Error("It is expected that all input's are synced to a piece of data.");let r=t[n];if(r===void 0&&!((f=Object.getOwnPropertyDescriptor(t,n))!=null&&f.set))throw new Error(`${n} does not exist.`);let i=e.getAttribute("@mask");if(i&&q[i]===void 0)throw new Error(`The @mask ${i} does not exist.`);let o=e.getAttribute("@mask-args");return{value:r,sync:n,mask:i,maskArgs:o}}shouldNotIncludeCheck(e,t,n){let r=e.getAttribute("@if");if(r&&!V(r,n))return t.ifIsFalse=!0,!0;let i=e.getAttribute("@elseif"),o=e.getAttribute("@else")!==null;return i&&(t.elseIfPresent=!0),!i&&!o&&(t.ifIsFalse=!1,t.elseIfIsFalse=!1,t.elseIfPresent=!1),!t.ifIsFalse&&i?!0:i&&!V(i,n)?(t.elseIfIsFalse=!0,!0):(!t.ifIsFalse||t.elseIfPresent&&!t.elseIfIsFalse)&&o?!0:(o&&(t.ifIsFalse=!1,t.elseIfIsFalse=!1,t.elseIfPresent=!1),!1)}generateVNode(e,t,n,r){let i=this.textNode(t,n,r);if(i)return i;let o=this.nodeWithTextContent(t,r);return o||j(e.nodeName,r,e.childNodes.length>0?this.generateVNodes(e.childNodes,n):[])}nodeWithTextContent(e,t){var n;if(((n=e.textContent)==null?void 0:n.trim())!==""&&e.children.length===0)return t.props=M(F({},t.props),e),j(e.nodeName,t,e.textContent)}textNode(e,t,n){let r=e.getAttribute("@text");if(r){if(t[r]===void 0)throw new Error(`${r} does not exist in the object.`);return n.props=M(F({text:r},n.props),e),j(e.nodeName,n,t[r])}}updateState(e){if(e.target){let t=e.target,n=this.elements.findIndex(i=>i.id===this.findSpargoParentNodeLocalName(t.parentNode));if(n<0)throw new Error(`Element with id of ${t.parentNode.localName} not found in memory`);let r=this.elements[n];this.retrieveNodeChildren(r.vNode.children,r,e)}}findSpargoParentNodeLocalName(e){return e.localName.includes("spargo-")?e.localName:e.parentNode&&e.parentNode.localName.includes("spargo-")?e.parentNode.localName:this.findSpargoParentNodeLocalName(e.parentNode)}retrieveNodeChildren(e,t,n){let r=n.target,i=t.object;e==null||e.map(o=>{typeof o!="string"&&o.children&&o.children.length>0?this.retrieveNodeChildren(o.children,t,n):typeof o!="string"&&o.data&&o.data.props&&o.data.props.sync&&o.data.props.sync===r.sync&&(o.data.props.mask?(o.data.props.maskArgs?i[o.data.props.sync]=q[o.data.props.mask](r.value,o.data.props.maskArgs):i[o.data.props.sync]=q[o.data.props.mask](r.value),r.value=i[o.data.props.sync]):i[o.data.props.sync]=r.value)})}};var ie=Y([Q,ne,se,Z,te]),X=class{constructor(){this.elements=[];this.vdom=new D([],ie);window.addEventListener("DOMContentLoaded",()=>{this.vdom=new D(this.elements,ie),this.initialize()})}initialize(){document.querySelectorAll("[ignite]").forEach(t=>{this.createElement(t)})}createElement(e){if(e.getAttribute("spargo-id"))return;let t=window[e.getAttribute("ignite")]();if(!t)throw new Error(`${e.getAttribute("ignite")} does not exist as a method on the page.`);let n=`spargo-${crypto.randomUUID()}`,r=e.cloneNode(!0);this.vdom.iterateOverLoops(e,t);let i=j(n,{class:R(e,t)},this.vdom.generateVNodes(e.childNodes,t));ie(z(e),i);let o=new Proxy(t,{set:(f,m,I,A)=>(typeof m=="string"&&(f[m]=I),this.vdom.updateByElement(A),!0)});this.elements.push({id:n,vNode:i,object:o,element:r}),typeof o.ignited=="function"&&o.ignited()}};new X;})();
